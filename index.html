<!DOCTYPE html>
<html>
<head>
    <title>FIT SHIRTS Login</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Welcome to FIT SHIRTS</h1>
    
    <!-- User Type Selection -->
    <select id="userType" name="userType" onchange="toggleSignInOut(this.value)">
        <option value="employee">Employee</option>
        <option value="agency">Agency Staff</option>
        <option value="visitor">Visitor</option>
    </select>

    <!-- Sign In/Out Form -->
    <form id="signInOutForm" action="http://127.0.0.1:5000/login" method="post">
        <input type="text" id="username" name="username" placeholder="Enter your username">
        <input type="hidden" id="userAction" name="action" value="sign-in">
        <button type="submit" id="signInButton">Sign In</button>
        <button type="button" id="signOutButton" onclick="signOut()" disabled>Sign Out</button>
        <button id="startBreak" type="button" disabled>Start Break</button>
        <button id="endBreak" type="button" disabled>End Break</button>
    </form>
    <!-- HTML Form for Sign-In and Sign-Out -->
<form id="signInOutForm" action="http://127.0.0.1:5000/login" method="post">
    <input type="number" id="userId" name="user_id" placeholder="Enter your User ID">
    <select name="action">
        <option value="sign-in">Sign In</option>
        <option value="sign-out">Sign Out</option>
    </select>
    <button type="submit">Submit</button>
</form>

    <div id="adminDashboard">
        <h2>Admin Dashboard</h2>
        <div id="dashboardContent">
            <!-- Dashboard content will be loaded here -->
        </div>
    </div>
    
    <script>
        // Assuming you have a function to check if the user is an admin
        if (isAdmin()) {
            fetch('http://127.0.0.1:5000/admin/dashboard')
                .then(response => response.json())
                .then(data => {
                    let contentHtml = '<h3>User Activities</h3>';
                    data.activities.forEach(activity => {
                        contentHtml += `<p>User ID: ${activity.user_id}, Action: ${activity.action_type}, Time: ${activity.timestamp}</p>`;
                    });
                    document.getElementById('dashboardContent').innerHTML = contentHtml;
                })
                .catch(error => console.error('Error:', error));
        }
    </script>
    <!-- Report Section -->
<div>
    <h2>Activity Report</h2>
    <input type="number" id="reportUserId" placeholder="User ID (optional)">
    <input type="date" id="reportDate" placeholder="Date (optional)">
    <button onclick="fetchReport()">Get Report</button>
    <div id="reportResults"></div>
</div>

<script>
function fetchReport() {
    const userId = document.getElementById('reportUserId').value;
    const date = document.getElementById('reportDate').value;
    let url = `http://127.0.0.1:5000/activity-report?`;

    if (userId) url += `user_id=${userId}&`;
    if (date) url += `date=${date}`;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            let resultsHtml = data.map(activity => 
                `<p>User ID: ${activity[1]}, Action: ${activity[2]}, Time: ${activity[3]}</p>`
            ).join('');
            document.getElementById('reportResults').innerHTML = resultsHtml;
        })
        .catch(error => console.error('Error:', error));
}
</script>

    <script src="script.js"></script>
</body>
</html>

